<!DOCTYPE html>
<html lang="zh-tw"><head>
  <meta charset="utf-8">
  <title>
    
    愛的魔力轉圈圈-不斷重複的迴圈動態
    
  </title>
  <!-- mobile responsive meta -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description"
    content="紀錄製作迴圈動態的過程">
  
  <meta name="author"
    content="Leo">
  <meta name="generator" content="Hugo 0.68.3" />

  <!-- plugins -->
  
  <link rel="stylesheet"
    href="https://bjmqfg83.github.io/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet"
    href="https://bjmqfg83.github.io/plugins/slick/slick.css ">
  
  <link rel="stylesheet"
    href="https://bjmqfg83.github.io/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet"
    href="https://bjmqfg83.github.io/plugins/venobox/venobox.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet"
    href="https://bjmqfg83.github.io/scss/style.min.css"
    media="screen">

  <!--Favicon-->
  <link rel="shortcut icon"
    href="https://bjmqfg83.github.io/images/favicon.png "
    type="image/x-icon">
  <link rel="icon"
    href="https://bjmqfg83.github.io/images/favicon.png "
    type="image/x-icon">

  

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0">
      <a class="navbar-brand mobile-view text-dark"
        href="https://bjmqfg83.github.io"><img class="img-fluid header-logo mr-3"
          src="https://bjmqfg83.github.io/images/favicon.png"
          alt="Leo&#39;s blog">Leo&#39;s blog</a>
      <button class="navbar-toggler border-0"
        type="button"
        data-toggle="collapse"
        data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center"
        id="navigation">
        

        <a class="navbar-brand mr-auto desktop-view text-dark"
          href="https://bjmqfg83.github.io"><img class="img-fluid header-logo mr-3"
            src="https://bjmqfg83.github.io/images/favicon.png"
            alt="Leo&#39;s blog">Leo&#39;s blog</a>

        <ul class="navbar-nav">
          
          
          <li class="nav-item">
            <a class="nav-link"
              href="https://bjmqfg83.github.io/">Home</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link"
              href="https://bjmqfg83.github.io/about">About</a>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search pl-lg-4">
          <button id="searchOpen"
            class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://bjmqfg83.github.io/search"
              class="h-100">
              <input class="search-box px-4"
                id="search-query"
                name="s"
                type="search"
                placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose"
              class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->
<section class="section-sm article-container">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 mx-auto">
        <h2 class="article-font">愛的魔力轉圈圈-不斷重複的迴圈動態</h2>
        <div class="mb-3 post-meta">
          <span>By Leo</span>
          
          <span class="border-bottom border-primary px-2 mx-1"></span>
          <span>25 December 2020</span>
          
          <span class="border-bottom border-primary px-2 mx-1"></span>
          
          <a href="/categories/javascript"
            class="text-primary">Javascript</a>
          
        </div>
        
        <img src="https://bjmqfg83.github.io/images/post/loop_cover.jpg"
          class="img-fluid w-100 mb-4"
          alt="愛的魔力轉圈圈-不斷重複的迴圈動態">
        
        <div class="content mb-5 article">
          <p>前一陣子同事丟了一個問題要我動動腦練習寫一個迴圈動態，規則如下</p>
<ol>
<li>以中心點做為起始點</li>
<li>不斷重複</li>
<li>不論版面是3x3、5x5、7x7、9x9甚至是以上都要能夠正常執行</li>
</ol>
<p>開發歷程:</p>
<p>開發的時候在元素上標示上數字可以在開發時幫忙找出中點以及跑迴圈的相關邏輯,建議標上去</p>
<p><img src="/images/post/demo_cover1.jpg" alt=""></p>
<p>接下來就是找出所需的相關資訊，稍後會在說明要迴圈數、轉折點的主因</p>
<ol>
<li>起始點</li>
<li>迴圈數</li>
<li>轉折點</li>
</ol>
<p>起始點直接除以2取最小整數即可</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#6ab825;font-weight:bold">var</span> now_pos = <span style="color:#24909d">Math</span>.floor(元素總數 / <span style="color:#3677a9">2</span>);
</code></pre></div><p>迴圈數思考一下可以發現3x3是跑一圈迴圈、5x5兩圈、7x7三圈&hellip;</p>
<p>由此得出以下關係</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#6ab825;font-weight:bold">var</span> looptimes = (<span style="color:#24909d">Math</span>.sqrt(元素總數) - <span style="color:#3677a9">1</span>) / <span style="color:#3677a9">2</span>;
</code></pre></div><p>轉折點是當中非常重要的關鍵，因為會需要轉折點讓程式判斷跑的方向</p>
<p>我是取中心點的左右斜對角作為轉折點，並透過迴圈數求出所有轉折點</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">  <span style="color:#6ab825;font-weight:bold">for</span> (<span style="color:#6ab825;font-weight:bold">var</span> i = <span style="color:#3677a9">1</span>; i &lt;= looptimes; i++) {
    <span style="color:#999;font-style:italic">// 最後-1是為了對應陣列下標從0開始
</span><span style="color:#999;font-style:italic"></span>    <span style="color:#999;font-style:italic">// 左上
</span><span style="color:#999;font-style:italic"></span>    cp.push(<span style="color:#24909d">Math</span>.ceil(元素總數 / <span style="color:#3677a9">2</span>) - i * (<span style="color:#24909d">Math</span>.sqrt(元素總數) + <span style="color:#3677a9">1</span>) - <span style="color:#3677a9">1</span>);
    <span style="color:#999;font-style:italic">// 右上
</span><span style="color:#999;font-style:italic"></span>    cp.push(<span style="color:#24909d">Math</span>.ceil(元素總數 / <span style="color:#3677a9">2</span>) - i * (<span style="color:#24909d">Math</span>.sqrt(元素總數) - <span style="color:#3677a9">1</span>) - <span style="color:#3677a9">1</span>);
    <span style="color:#999;font-style:italic">//右下
</span><span style="color:#999;font-style:italic"></span>    cp.push(<span style="color:#24909d">Math</span>.ceil(元素總數 / <span style="color:#3677a9">2</span>) + i * (<span style="color:#24909d">Math</span>.sqrt(元素總數) + <span style="color:#3677a9">1</span>) - <span style="color:#3677a9">1</span>);
    <span style="color:#999;font-style:italic">// 左下
</span><span style="color:#999;font-style:italic"></span>    cp.push(<span style="color:#24909d">Math</span>.ceil(元素總數 / <span style="color:#3677a9">2</span>) + i * (<span style="color:#24909d">Math</span>.sqrt(元素總數) - <span style="color:#3677a9">1</span>) - <span style="color:#3677a9">1</span>);
}
</code></pre></div><p>求出所有的轉折點後可以開始做迴圈的邏輯判斷了</p>
<p>計算當前所在的點 <strong>(最開始是中心點)</strong> 與轉折點之間的差值之後求差值得商數及餘數</p>
<ul>
<li><strong>餘數作為左右的判斷</strong></li>
<li><strong>商數作為上下的判斷</strong></li>
<li><strong>當前的點大於轉折點迴圈的方向就為左或上</strong></li>
<li><strong>當前的點小於轉折點迴圈的方向就為右或下</strong></li>
</ul>
<p>重複執行的部分則透過setInterval去做就可以了</p>
<p>在測試的時候可以改成7x7或9x9看看，一樣可以正常的執行</p>
<p>之後針對動態如果還有什麼問題都歡迎來找我討論~</p>
<p>執行結果:</p>







<script
    data-slug-hash="QWKONxM"
    data-user="mgnlhdsl"
    data-height="700"
    data-default-tab="result"
    data-theme-id="8862"
    class='codepen'
    async
    src="//codepen.io/assets/embed/ei.js"
></script>

        </div>

        
        
        
        
        <script src="https://utteranc.es/client.js"
          repo="bjmqfg83/comment-utterances"
          issue-term="title"
          theme="github-light"
          crossorigin="anonymous"
          async>
          </script>
      </div>
    </div>
  </div>
</section>





<script>
  var indexURL = "https://bjmqfg83.github.io/index.json"
</script>

<!-- JS Plugins -->

<script src="https://bjmqfg83.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://bjmqfg83.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://bjmqfg83.github.io/plugins/slick/slick.min.js"></script>

<script src="https://bjmqfg83.github.io/plugins/venobox/venobox.min.js"></script>

<script src="https://bjmqfg83.github.io/plugins/search/fuse.min.js"></script>

<script src="https://bjmqfg83.github.io/plugins/search/mark.js"></script>

<script src="https://bjmqfg83.github.io/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://bjmqfg83.github.io/js/script.min.js"></script>
<!-- google analitycs -->
<script>
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-176082228-1', 'auto');
  ga('send', 'pageview');
</script></body>
</html>